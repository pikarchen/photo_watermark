# 水印文件处理工具

一个功能完整的水印文件本地应用，支持文本和图片水印，批量处理图片文件。

## 功能特性

### 文件处理
- ✅ 支持单张图片拖拽或通过文件选择器导入
- ✅ 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
- ✅ 在界面上显示已导入图片的列表（缩略图和文件名）
- ✅ 支持主流格式：JPEG, PNG, BMP, TIFF
- ✅ PNG格式支持透明通道
- ✅ 用户可选择输出为 JPEG 或 PNG
- ✅ 提供导出文件命名规则选项（保留原文件名、添加前缀/后缀）
- ✅ JPEG格式提供图片质量调节（0-100）

### 水印类型
- ✅ 文本水印：自定义文本内容、字体、颜色、透明度
- ✅ 图片水印：支持带透明通道的PNG图片
- ✅ 字体样式：粗体、斜体、阴影效果
- ✅ 透明度调节（0-100%）

### 水印布局与样式
- ✅ 实时预览：所有调整都在主预览窗口中实时显示
- ✅ 九宫格布局：提供预设位置（四角、正中心）
- ✅ 手动拖拽：用户可以直接在预览图上拖拽水印到任意位置

### 配置管理
- ✅ 水印模板：保存和加载水印设置
- ✅ 程序启动时自动加载上一次的设置

## 安装和使用

### 环境要求
- Python 3.7+
- Windows 10/11

### 安装步骤

1. 克隆或下载项目到本地
2. 打开命令提示符，进入项目目录
3. 安装依赖包：
```bash
pip install -r requirements.txt
```

4. 运行程序：
```bash
python main.py
```

### 使用说明

#### 1. 导入图片
- **单张图片**：点击"选择单张图片"按钮，选择要添加水印的图片
- **批量导入**：点击"批量导入图片"按钮，一次性选择多张图片
- **文件夹导入**：点击"导入文件夹"按钮，导入整个文件夹中的所有图片
- **支持格式**：JPEG, PNG, BMP, TIFF等主流图片格式
- **预览列表**：导入的图片会显示在左侧列表中，包含缩略图和文件名

#### 2. 设置水印

**文本水印设置**：
- **文本内容**：在"文本内容"输入框中输入要显示的水印文字
- **字体选择**：从下拉菜单中选择字体（Arial, 微软雅黑, 宋体等）
- **字体大小**：使用数字输入框调整字体大小（8-200）
- **字体样式**：勾选"粗体"、"斜体"、"阴影"等选项
- **颜色设置**：点击"选择颜色"按钮选择水印文字颜色
- **透明度**：使用滑块调整水印透明度（0-100%）

**图片水印设置**：
- **选择图片**：点击"选择"按钮选择作为水印的图片文件
- **透明度**：使用滑块调整图片水印的透明度（0-100%）
- **支持格式**：推荐使用PNG格式，支持透明通道

#### 3. 调整位置
- **九宫格布局**：使用预览区域下方的九个按钮快速设置水印位置
  - 左上、上中、右上
  - 左中、居中、右中  
  - 左下、下中、右下
- **点击切换**：在预览图上点击可以循环切换水印位置
- **实时预览**：所有调整都会在预览窗口中实时显示效果

#### 4. 导出设置
- **输出格式**：选择JPEG或PNG格式
- **输出文件夹**：点击"选择"按钮选择保存位置
- **文件命名**：
  - 原文件名：保持原始文件名
  - 添加前缀：在原文件名前添加自定义前缀
  - 添加后缀：在原文件名后添加自定义后缀
- **质量设置**：对于JPEG格式，可调节压缩质量（1-100）
- **安全保护**：程序默认禁止导出到原文件夹，防止覆盖原图

#### 5. 模板管理
- **保存模板**：输入模板名称，点击"保存"按钮保存当前水印设置
- **加载模板**：从下拉菜单中选择已保存的模板
- **删除模板**：选择模板后点击"删除"按钮移除不需要的模板
- **自动加载**：程序启动时会自动加载上次使用的设置

#### 6. 批量处理
- 导入多张图片后，所有图片都会使用相同的水印设置
- 点击"开始导出"按钮可以批量处理所有图片
- 导出过程中会显示进度和当前处理的文件名
- 导出完成后会显示成功和失败的数量统计

## 技术实现

- **界面框架**：PyQt5
- **图像处理**：Pillow (PIL)
- **文件格式支持**：JPEG, PNG, BMP, TIFF
- **模板存储**：JSON格式

## 注意事项

- 程序默认禁止导出到原文件夹，防止覆盖原图
- 支持透明通道的PNG图片作为水印
- 所有设置变更都会实时在预览窗口中显示
- 模板文件保存在程序目录下的 `templates.json`

## 开发计划

- [ ] 添加水印旋转功能
- [ ] 添加图片尺寸调整功能
- [ ] 优化拖拽交互体验
- [ ] 添加更多字体样式选项
- [ ] 支持批量导出进度显示
